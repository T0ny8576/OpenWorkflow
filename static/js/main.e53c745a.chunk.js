(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{125:function(e,t,a){},207:function(e,t,a){e.exports=a(451)},212:function(e,t,a){},445:function(e,t,a){var r=a(446),n=r,o=Function("return this")();n.exportSymbol("proto.Instruction",null,o),n.exportSymbol("proto.Processor",null,o),n.exportSymbol("proto.State",null,o),n.exportSymbol("proto.StateMachine",null,o),n.exportSymbol("proto.Transition",null,o),n.exportSymbol("proto.TransitionPredicate",null,o),proto.TransitionPredicate=function(e){r.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.TransitionPredicate,r.Message),n.DEBUG&&!COMPILED&&(proto.TransitionPredicate.displayName="proto.TransitionPredicate"),r.Message.GENERATE_TO_OBJECT&&(proto.TransitionPredicate.prototype.toObject=function(e){return proto.TransitionPredicate.toObject(e,this)},proto.TransitionPredicate.toObject=function(e,t){var a,n={name:r.Message.getFieldWithDefault(t,1,""),callableName:r.Message.getFieldWithDefault(t,2,""),callableKwargsMap:(a=t.getCallableKwargsMap())?a.toObject(e,void 0):[],callableArgs:r.Message.getFieldWithDefault(t,4,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.TransitionPredicate.deserializeBinary=function(e){var t=new r.BinaryReader(e),a=new proto.TransitionPredicate;return proto.TransitionPredicate.deserializeBinaryFromReader(a,t)},proto.TransitionPredicate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setName(a);break;case 2:a=t.readString();e.setCallableName(a);break;case 3:a=e.getCallableKwargsMap();t.readMessage(a,function(e,t){r.Map.deserializeBinary(e,t,r.BinaryReader.prototype.readString,r.BinaryReader.prototype.readBytes,null,"")});break;case 4:a=t.readString();e.setCallableArgs(a);break;default:t.skipField()}}return e},proto.TransitionPredicate.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.TransitionPredicate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.TransitionPredicate.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getName()).length>0&&t.writeString(1,a),(a=e.getCallableName()).length>0&&t.writeString(2,a),(a=e.getCallableKwargsMap(!0))&&a.getLength()>0&&a.serializeBinary(3,t,r.BinaryWriter.prototype.writeString,r.BinaryWriter.prototype.writeBytes),(a=e.getCallableArgs()).length>0&&t.writeString(4,a)},proto.TransitionPredicate.prototype.getName=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.TransitionPredicate.prototype.setName=function(e){r.Message.setProto3StringField(this,1,e)},proto.TransitionPredicate.prototype.getCallableName=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.TransitionPredicate.prototype.setCallableName=function(e){r.Message.setProto3StringField(this,2,e)},proto.TransitionPredicate.prototype.getCallableKwargsMap=function(e){return r.Message.getMapField(this,3,e,null)},proto.TransitionPredicate.prototype.clearCallableKwargsMap=function(){this.getCallableKwargsMap().clear()},proto.TransitionPredicate.prototype.getCallableArgs=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.TransitionPredicate.prototype.setCallableArgs=function(e){r.Message.setProto3StringField(this,4,e)},proto.Instruction=function(e){r.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Instruction,r.Message),n.DEBUG&&!COMPILED&&(proto.Instruction.displayName="proto.Instruction"),r.Message.GENERATE_TO_OBJECT&&(proto.Instruction.prototype.toObject=function(e){return proto.Instruction.toObject(e,this)},proto.Instruction.toObject=function(e,t){var a={name:r.Message.getFieldWithDefault(t,1,""),audio:r.Message.getFieldWithDefault(t,2,""),image:t.getImage_asB64(),video:t.getVideo_asB64()};return e&&(a.$jspbMessageInstance=t),a}),proto.Instruction.deserializeBinary=function(e){var t=new r.BinaryReader(e),a=new proto.Instruction;return proto.Instruction.deserializeBinaryFromReader(a,t)},proto.Instruction.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setName(a);break;case 2:a=t.readString();e.setAudio(a);break;case 3:a=t.readBytes();e.setImage(a);break;case 4:a=t.readBytes();e.setVideo(a);break;default:t.skipField()}}return e},proto.Instruction.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.Instruction.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Instruction.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getName()).length>0&&t.writeString(1,a),(a=e.getAudio()).length>0&&t.writeString(2,a),(a=e.getImage_asU8()).length>0&&t.writeBytes(3,a),(a=e.getVideo_asU8()).length>0&&t.writeBytes(4,a)},proto.Instruction.prototype.getName=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.Instruction.prototype.setName=function(e){r.Message.setProto3StringField(this,1,e)},proto.Instruction.prototype.getAudio=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.Instruction.prototype.setAudio=function(e){r.Message.setProto3StringField(this,2,e)},proto.Instruction.prototype.getImage=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.Instruction.prototype.getImage_asB64=function(){return r.Message.bytesAsB64(this.getImage())},proto.Instruction.prototype.getImage_asU8=function(){return r.Message.bytesAsU8(this.getImage())},proto.Instruction.prototype.setImage=function(e){r.Message.setProto3BytesField(this,3,e)},proto.Instruction.prototype.getVideo=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.Instruction.prototype.getVideo_asB64=function(){return r.Message.bytesAsB64(this.getVideo())},proto.Instruction.prototype.getVideo_asU8=function(){return r.Message.bytesAsU8(this.getVideo())},proto.Instruction.prototype.setVideo=function(e){r.Message.setProto3BytesField(this,4,e)},proto.Transition=function(e){r.Message.initialize(this,e,0,-1,proto.Transition.repeatedFields_,null)},n.inherits(proto.Transition,r.Message),n.DEBUG&&!COMPILED&&(proto.Transition.displayName="proto.Transition"),proto.Transition.repeatedFields_=[2],r.Message.GENERATE_TO_OBJECT&&(proto.Transition.prototype.toObject=function(e){return proto.Transition.toObject(e,this)},proto.Transition.toObject=function(e,t){var a,n={name:r.Message.getFieldWithDefault(t,1,""),predicatesList:r.Message.toObjectList(t.getPredicatesList(),proto.TransitionPredicate.toObject,e),instruction:(a=t.getInstruction())&&proto.Instruction.toObject(e,a),nextState:r.Message.getFieldWithDefault(t,4,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.Transition.deserializeBinary=function(e){var t=new r.BinaryReader(e),a=new proto.Transition;return proto.Transition.deserializeBinaryFromReader(a,t)},proto.Transition.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setName(a);break;case 2:a=new proto.TransitionPredicate;t.readMessage(a,proto.TransitionPredicate.deserializeBinaryFromReader),e.addPredicates(a);break;case 3:a=new proto.Instruction;t.readMessage(a,proto.Instruction.deserializeBinaryFromReader),e.setInstruction(a);break;case 4:a=t.readString();e.setNextState(a);break;default:t.skipField()}}return e},proto.Transition.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.Transition.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Transition.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getName()).length>0&&t.writeString(1,a),(a=e.getPredicatesList()).length>0&&t.writeRepeatedMessage(2,a,proto.TransitionPredicate.serializeBinaryToWriter),null!=(a=e.getInstruction())&&t.writeMessage(3,a,proto.Instruction.serializeBinaryToWriter),(a=e.getNextState()).length>0&&t.writeString(4,a)},proto.Transition.prototype.getName=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.Transition.prototype.setName=function(e){r.Message.setProto3StringField(this,1,e)},proto.Transition.prototype.getPredicatesList=function(){return r.Message.getRepeatedWrapperField(this,proto.TransitionPredicate,2)},proto.Transition.prototype.setPredicatesList=function(e){r.Message.setRepeatedWrapperField(this,2,e)},proto.Transition.prototype.addPredicates=function(e,t){return r.Message.addToRepeatedWrapperField(this,2,e,proto.TransitionPredicate,t)},proto.Transition.prototype.clearPredicatesList=function(){this.setPredicatesList([])},proto.Transition.prototype.getInstruction=function(){return r.Message.getWrapperField(this,proto.Instruction,3)},proto.Transition.prototype.setInstruction=function(e){r.Message.setWrapperField(this,3,e)},proto.Transition.prototype.clearInstruction=function(){this.setInstruction(void 0)},proto.Transition.prototype.hasInstruction=function(){return null!=r.Message.getField(this,3)},proto.Transition.prototype.getNextState=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.Transition.prototype.setNextState=function(e){r.Message.setProto3StringField(this,4,e)},proto.Processor=function(e){r.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Processor,r.Message),n.DEBUG&&!COMPILED&&(proto.Processor.displayName="proto.Processor"),r.Message.GENERATE_TO_OBJECT&&(proto.Processor.prototype.toObject=function(e){return proto.Processor.toObject(e,this)},proto.Processor.toObject=function(e,t){var a,n={name:r.Message.getFieldWithDefault(t,1,""),callableName:r.Message.getFieldWithDefault(t,2,""),callableKwargsMap:(a=t.getCallableKwargsMap())?a.toObject(e,void 0):[],callableArgs:r.Message.getFieldWithDefault(t,4,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.Processor.deserializeBinary=function(e){var t=new r.BinaryReader(e),a=new proto.Processor;return proto.Processor.deserializeBinaryFromReader(a,t)},proto.Processor.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setName(a);break;case 2:a=t.readString();e.setCallableName(a);break;case 3:a=e.getCallableKwargsMap();t.readMessage(a,function(e,t){r.Map.deserializeBinary(e,t,r.BinaryReader.prototype.readString,r.BinaryReader.prototype.readBytes,null,"")});break;case 4:a=t.readString();e.setCallableArgs(a);break;default:t.skipField()}}return e},proto.Processor.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.Processor.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Processor.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getName()).length>0&&t.writeString(1,a),(a=e.getCallableName()).length>0&&t.writeString(2,a),(a=e.getCallableKwargsMap(!0))&&a.getLength()>0&&a.serializeBinary(3,t,r.BinaryWriter.prototype.writeString,r.BinaryWriter.prototype.writeBytes),(a=e.getCallableArgs()).length>0&&t.writeString(4,a)},proto.Processor.prototype.getName=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.Processor.prototype.setName=function(e){r.Message.setProto3StringField(this,1,e)},proto.Processor.prototype.getCallableName=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.Processor.prototype.setCallableName=function(e){r.Message.setProto3StringField(this,2,e)},proto.Processor.prototype.getCallableKwargsMap=function(e){return r.Message.getMapField(this,3,e,null)},proto.Processor.prototype.clearCallableKwargsMap=function(){this.getCallableKwargsMap().clear()},proto.Processor.prototype.getCallableArgs=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.Processor.prototype.setCallableArgs=function(e){r.Message.setProto3StringField(this,4,e)},proto.State=function(e){r.Message.initialize(this,e,0,-1,proto.State.repeatedFields_,null)},n.inherits(proto.State,r.Message),n.DEBUG&&!COMPILED&&(proto.State.displayName="proto.State"),proto.State.repeatedFields_=[2,3],r.Message.GENERATE_TO_OBJECT&&(proto.State.prototype.toObject=function(e){return proto.State.toObject(e,this)},proto.State.toObject=function(e,t){var a={name:r.Message.getFieldWithDefault(t,1,""),processorsList:r.Message.toObjectList(t.getProcessorsList(),proto.Processor.toObject,e),transitionsList:r.Message.toObjectList(t.getTransitionsList(),proto.Transition.toObject,e)};return e&&(a.$jspbMessageInstance=t),a}),proto.State.deserializeBinary=function(e){var t=new r.BinaryReader(e),a=new proto.State;return proto.State.deserializeBinaryFromReader(a,t)},proto.State.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setName(a);break;case 2:a=new proto.Processor;t.readMessage(a,proto.Processor.deserializeBinaryFromReader),e.addProcessors(a);break;case 3:a=new proto.Transition;t.readMessage(a,proto.Transition.deserializeBinaryFromReader),e.addTransitions(a);break;default:t.skipField()}}return e},proto.State.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.State.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.State.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getName()).length>0&&t.writeString(1,a),(a=e.getProcessorsList()).length>0&&t.writeRepeatedMessage(2,a,proto.Processor.serializeBinaryToWriter),(a=e.getTransitionsList()).length>0&&t.writeRepeatedMessage(3,a,proto.Transition.serializeBinaryToWriter)},proto.State.prototype.getName=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.State.prototype.setName=function(e){r.Message.setProto3StringField(this,1,e)},proto.State.prototype.getProcessorsList=function(){return r.Message.getRepeatedWrapperField(this,proto.Processor,2)},proto.State.prototype.setProcessorsList=function(e){r.Message.setRepeatedWrapperField(this,2,e)},proto.State.prototype.addProcessors=function(e,t){return r.Message.addToRepeatedWrapperField(this,2,e,proto.Processor,t)},proto.State.prototype.clearProcessorsList=function(){this.setProcessorsList([])},proto.State.prototype.getTransitionsList=function(){return r.Message.getRepeatedWrapperField(this,proto.Transition,3)},proto.State.prototype.setTransitionsList=function(e){r.Message.setRepeatedWrapperField(this,3,e)},proto.State.prototype.addTransitions=function(e,t){return r.Message.addToRepeatedWrapperField(this,3,e,proto.Transition,t)},proto.State.prototype.clearTransitionsList=function(){this.setTransitionsList([])},proto.StateMachine=function(e){r.Message.initialize(this,e,0,-1,proto.StateMachine.repeatedFields_,null)},n.inherits(proto.StateMachine,r.Message),n.DEBUG&&!COMPILED&&(proto.StateMachine.displayName="proto.StateMachine"),proto.StateMachine.repeatedFields_=[2],r.Message.GENERATE_TO_OBJECT&&(proto.StateMachine.prototype.toObject=function(e){return proto.StateMachine.toObject(e,this)},proto.StateMachine.toObject=function(e,t){var a,n={name:r.Message.getFieldWithDefault(t,1,""),statesList:r.Message.toObjectList(t.getStatesList(),proto.State.toObject,e),assetsMap:(a=t.getAssetsMap())?a.toObject(e,void 0):[],startState:r.Message.getFieldWithDefault(t,4,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.StateMachine.deserializeBinary=function(e){var t=new r.BinaryReader(e),a=new proto.StateMachine;return proto.StateMachine.deserializeBinaryFromReader(a,t)},proto.StateMachine.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setName(a);break;case 2:a=new proto.State;t.readMessage(a,proto.State.deserializeBinaryFromReader),e.addStates(a);break;case 3:a=e.getAssetsMap();t.readMessage(a,function(e,t){r.Map.deserializeBinary(e,t,r.BinaryReader.prototype.readString,r.BinaryReader.prototype.readBytes,null,"")});break;case 4:a=t.readString();e.setStartState(a);break;default:t.skipField()}}return e},proto.StateMachine.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.StateMachine.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.StateMachine.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getName()).length>0&&t.writeString(1,a),(a=e.getStatesList()).length>0&&t.writeRepeatedMessage(2,a,proto.State.serializeBinaryToWriter),(a=e.getAssetsMap(!0))&&a.getLength()>0&&a.serializeBinary(3,t,r.BinaryWriter.prototype.writeString,r.BinaryWriter.prototype.writeBytes),(a=e.getStartState()).length>0&&t.writeString(4,a)},proto.StateMachine.prototype.getName=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.StateMachine.prototype.setName=function(e){r.Message.setProto3StringField(this,1,e)},proto.StateMachine.prototype.getStatesList=function(){return r.Message.getRepeatedWrapperField(this,proto.State,2)},proto.StateMachine.prototype.setStatesList=function(e){r.Message.setRepeatedWrapperField(this,2,e)},proto.StateMachine.prototype.addStates=function(e,t){return r.Message.addToRepeatedWrapperField(this,2,e,proto.State,t)},proto.StateMachine.prototype.clearStatesList=function(){this.setStatesList([])},proto.StateMachine.prototype.getAssetsMap=function(e){return r.Message.getMapField(this,3,e,null)},proto.StateMachine.prototype.clearAssetsMap=function(){this.getAssetsMap().clear()},proto.StateMachine.prototype.getStartState=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.StateMachine.prototype.setStartState=function(e){r.Message.setProto3StringField(this,4,e)},n.object.extend(t,proto)},451:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(15),i=a.n(o),s=(a(212),a(45)),l=a(46),c=a(49),p=a(47),u=a(50),d=a(9),g=a(116),m=a.n(g),h=a(29),f=a.n(h),b=a(20),y=a.n(b),S=a(203),M=a.n(S),E=a(113),T=a.n(E),v=a(35),w=a.n(v);w.a.shapes.basic.Circle.define("fsa.State",{attrs:{circle:{"stroke-width":3},text:{"font-weight":"800"}}}),w.a.dia.Link.define("fsa.Arrow",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"},".link-tools":{display:"none"},".tool-remove":{display:"none"}},smooth:!0});var F=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).graph=new w.a.dia.Graph,a.state_shape_width=50,a.state_shape_height=50,a.state_spacing_x=250,a.state_spacing_y=150,a.state_per_row=3,a.cellId2FSMElement={},a.renderAllStates=a.renderAllStates.bind(Object(d.a)(Object(d.a)(a))),a.renderAllTransitions=a.renderAllTransitions.bind(Object(d.a)(Object(d.a)(a))),a.getStateName2CellMap=a.getStateName2CellMap.bind(Object(d.a)(Object(d.a)(a))),a.clearGraph=a.clearGraph.bind(Object(d.a)(Object(d.a)(a))),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.fsm,e.onClickCell);this.$el=T()(this.el);var a=new w.a.dia.Paper({el:this.$el,width:800,height:800,gridSize:1,model:this.graph});a.on("cell:pointerdblclick",t),this.state_per_row=Math.floor(parseInt(a.options.width,10)/(this.state_shape_width+this.state_spacing_x))+1}},{key:"componentWillUnmount",value:function(){this.graph.clear(),this.cellId2FSMElement={}}},{key:"componentDidUpdate",value:function(){console.log("called compnenet did update")}},{key:"handleStateCallback",value:function(e){this.stateCells.push(e),console.log("hanldeStateCallback: "+this.stateCells)}},{key:"renderAllStates",value:function(e){var t=this;return console.log("called render all states"),e.getStatesList().map(function(e,a){var r,n,o,i=(r=Math.floor(a%t.state_per_row)*t.state_spacing_x,n=Math.floor(a/t.state_per_row)*t.state_spacing_y,o=e.getName(),new w.a.shapes.fsa.State({position:{x:r,y:n},size:{width:100,height:100},attrs:{text:{text:o}}}));t.addGraphCellWithRef(i,e)},this)}},{key:"renderAllTransitions",value:function(e){var t=this,a=e.getStatesList(),r=this.getStateName2CellMap();return a.map(function(e){return e.getTransitionsList().map(function(a){var n,o,i,s=(n=r[e.getName()],o=r[a.getNextState()],i=a.getName(),new w.a.shapes.fsa.Arrow({source:{id:n.id},target:{id:o.id},labels:[{position:.5,attrs:{text:{text:i||""}}}]}));t.addGraphCellWithRef(s,a)},t)},this)}},{key:"getStateName2CellMap",value:function(){var e=this.graph.getElements(),t={};return e.map(function(e){var a=e.attr("text/text");a in t?console.error("Duplicate State Name: "+a):t[a]=e}),t}},{key:"addGraphCellWithRef",value:function(e,t){this.graph.addCell(e),this.cellId2FSMElement[e.id]=t}},{key:"clearGraph",value:function(){this.graph.clear(),this.cellId2FSMElement={}}},{key:"render",value:function(){var e=this;console.log("Called render diagram"),console.log(this.props.fsm);var t=this.props,a=t.fsm;t.onClickCell;return null!=a&&(this.clearGraph(),this.renderAllStates(a),this.renderAllTransitions(a)),n.a.createElement("div",{ref:function(t){return e.el=t}},n.a.createElement("h4",null,"Diagram"))}}]),t}(r.Component),O=(a(125),a(204)),N=a(36),P=a(190),B=a.n(P),I=a(51),C=a.n(I),k={STATE:Symbol("state"),TRANSITION:Symbol("transition")};Object.freeze(k);var j=function(e){return"function"===typeof e.getProcessorsList?k.STATE:k.TRANSITION};function A(e){return e===Object(e)}var R=function(e,t){if(t){for(var a=(t=t.replace(/^\./,"")).split("."),r=0,n=a.length;r<n;++r){var o=a[r];if(!(A(e)&&o in e))return;e=e[o]}return e}},W=(a(257),function(e){var t=e.element;console.log("infobox render called");var a=j(t),r=a===k.STATE?t.getProcessorsList().map(function(e){return{name:e.getName(),callable_name:e.getCallableName(),callable_args:e.getCallableArgs()}}):t.getPredicatesList().map(function(e){return{name:e.getName(),callable_name:e.getCallableName(),callable_args:e.getCallableArgs()}}),o=a===k.STATE?[{Header:"Processor Name",accessor:"name",filterMethod:function(e,t){return Object(N.a)(t,e.value,{keys:["name"]})},filterAll:!0},{Header:"Processing Function",accessor:"callable_name",filterMethod:function(e,t){return Object(N.a)(t,e.value,{keys:["callable_name"]})},filterAll:!0},{Header:"Arguments",accessor:"callable_args",filterMethod:function(e,t){return Object(N.a)(t,e.value,{keys:["callable_args"]})},filterAll:!0}]:[{Header:"Predicate Name",accessor:"name",filterMethod:function(e,t){return Object(N.a)(t,e.value,{keys:["name"]})},filterAll:!0},{Header:"Predicate Function",accessor:"callable_name",filterMethod:function(e,t){return Object(N.a)(t,e.value,{keys:["callable_name"]})},filterAll:!0},{Header:"Arguments",accessor:"callable_args",filterMethod:function(e,t){return Object(N.a)(t,e.value,{keys:["callable_args"]})},filterAll:!0}];return n.a.createElement("div",null,n.a.createElement("h3",null,"Information"),n.a.createElement(B.a,null,n.a.createElement(C.a,null,n.a.createElement("h4",null,"Name: ",t.getName())),n.a.createElement(C.a,null,n.a.createElement("h4",null,"Type: ",a)),a===k.TRANSITION&&n.a.createElement(C.a,null,n.a.createElement("h4",null,"Instruction"),n.a.createElement("h5",null,"Audio:"),n.a.createElement("p",null,t.getInstruction().getAudio()),n.a.createElement("h5",null,"Image:"),n.a.createElement("p",null,t.getInstruction().getImage())," ",n.a.createElement("h5",null,"Video:"),n.a.createElement("p",null,t.getInstruction().getVideo())),n.a.createElement(C.a,null,n.a.createElement(O.a,{data:r,filterable:!0,defaultFilterMethod:function(e,t){return String(t[e.id])===e.value},columns:o,defaultPageSize:5,className:"-striped -highlight"}))))}),_=a(25),z=a.n(_),L=a(192),D=a.n(L),x=a(193),G=a.n(x),V=a(75),U=a.n(V),K=a(191),J=a.n(K),$=function(e){var t=e.onImport,a=e.onAdd,r=e.onExport,o=e.onDelete;return n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a,null,n.a.createElement(D.a,null,n.a.createElement(y.a,{sm:4},n.a.createElement(J.a,{as:"buffer",onChange:t},n.a.createElement(z.a,{variant:"primary"},"Import"))),n.a.createElement(y.a,{sm:4},n.a.createElement(z.a,{variant:"primary",onClick:r},"Export")),n.a.createElement(y.a,{sm:4},n.a.createElement(G.a,{id:"dropdown-basic-button",title:"Add"},n.a.createElement(U.a.Item,{onClick:function(){return a(k.STATE)}},"State"),n.a.createElement(U.a.Item,{onClick:function(){return a(k.TRANSITION)}},"Transition"))),n.a.createElement(y.a,{sm:4},n.a.createElement(z.a,{variant:"primary",onClick:o},"Delete")))))},H=a(62),q=a(52),Q=a.n(q),X=a(30),Y=a.n(X),Z=a(17),ee=(a(278),a(206)),te=a(78),ae=a(79),re=function(e){var t;return void 0!==e&&null!==e&&/^.+$/i.test(e)||(t="Required. Cannot be empty."),console.log("isEmpty returns "+t),t},ne=function(e,t){var a;return(void 0===e||null===e||t.includes(e))&&(a="Duplicate name. Names must be unique."),a},oe=function(e){var t=e.field,a=e.type,r=e.label,o=e.placeholder,i=e.defaultValue,s=e.isValid,l=Object(H.a)(e,["field","type","label","placeholder","defaultValue","isValid"]);return n.a.createElement(Y.a.Group,{as:f.a},n.a.createElement(Y.a.Label,{column:!0},r),n.a.createElement(y.a,null,n.a.createElement(Y.a.Control,Object.assign({required:!0},t,l,{type:a,placeholder:o,value:t.value||i||"",isValid:s}))))},ie=function(e){var t=e.field,a=e.form,r=e.label,o=e.selectOptions,i=Object(H.a)(e,["field","form","label","selectOptions"]);return n.a.createElement(Y.a.Group,{as:f.a},n.a.createElement(Y.a.Label,{column:!0},r),n.a.createElement(y.a,null,n.a.createElement(ee.a,Object.assign({},t,i,{options:o,name:t.name,value:o?o.find(function(e){return e.value===t.value}):"",onChange:function(e){return a.setFieldValue(t.name,e.value)},onBlur:t.onBlur}))))},se=function(e){var t=e.field,a=Object(H.a)(e,["field"]);return n.a.createElement(oe,Object.assign({field:t,type:"text",label:"name",placeholder:"Enter Name"},a))},le=function(e){var t=e.field,a=(e.key,e.label),r=e.placeholder,o=Object(H.a)(e,["field","key","label","placeholder"]);return n.a.createElement(oe,Object.assign({field:t,type:"text",label:a,placeholder:r},o))},ce=function(e,t){return R(e,t)?n.a.createElement("div",{className:"text-danger"},R(e,t)):null},pe=function(e,t,a,r,o,i){var s=function(e){return Object.keys(e).map(function(e){return{value:e,label:e}})}(t);return n.a.createElement("div",{key:r,className:"border"},n.a.createElement("h6",null,e),n.a.createElement(Z.a,{name:"callable.".concat(r,".name"),component:se,validate:re,isValid:!re(R(i,"callable.".concat(r,".name")))}),ce(i,"callable.".concat(r,".name")),n.a.createElement(Z.a,{name:"callable.".concat(r,".type"),component:function(e){return n.a.createElement(ie,Object.assign({},e,{label:"Type",selectOptions:s}))},validate:re}),ce(i,"callable.".concat(r,".type")),R(a,"callable.".concat(r,".type"))&&ue(t[a.callable[r].type],r,i),n.a.createElement("p",null,JSON.stringify(a)),n.a.createElement(Y.a.Row,null,n.a.createElement(z.a,{variant:"danger",onClick:function(){return o.remove({index:r})}},"Delete")))},ue=function(e,t,a){return Object.keys(e).map(function(r,o){return n.a.createElement("div",{key:t+".arg."+o},n.a.createElement(Z.a,{name:"callable.".concat(t,".args.").concat(r),component:le,label:r,placeholder:e[r],validate:re,isValid:!R(a,"callable.".concat(t,".args.").concat(r))}),ce(a,"callable.".concat(t,".args.").concat(r)))})},de=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).form=n.a.createRef(),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.show,r=t.type,o=t.fsm,i=t.onModalCancel,s=t.onModalSave;console.log(o);var l,c="",p=null,u="";switch(r){case k.STATE:l="New State",c="New Processor",u="Add Processor",p=te;break;case k.TRANSITION:l="New Transition",c="New Predicate",u="Add Predicate",p=ae;break;default:throw new Error("Unsupported Element Type: "+r+". Failed to add a new element")}return n.a.createElement(Q.a,{show:a,onHide:this.handleClose},n.a.createElement(Q.a.Header,null,n.a.createElement(Q.a.Title,null,l)),n.a.createElement(Q.a.Body,null,n.a.createElement(Z.d,{ref:this.form,initialValues:{callable:[]},onSubmit:function(e,t){t.props;var a=t.setSubmitting;s(r,e),a(!1)},render:function(e){var t=e.values,a=e.errors;return n.a.createElement(Z.c,null,n.a.createElement(Z.b,{name:"callable",render:function(e){return n.a.createElement(n.a.Fragment,null,r===k.STATE&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Z.a,{name:"name",component:oe,type:"text",label:"Name",validate:function(e){return function(e,t){return re(e)?re(e):ne(e,t)?ne(e,t):null}(e,o.getStatesList().map(function(e){return e.getName()}))}}),ce(a,"name")),r===k.TRANSITION&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Z.a,{name:"name",component:oe,type:"text",label:"Name",validate:re}),ce(a,"name"),function(e,t){var a=e.getStatesList().map(function(e){return{value:e.getName(),label:e.getName()}});return n.a.createElement(n.a.Fragment,null,n.a.createElement(Z.a,{name:"from",component:function(e){return n.a.createElement(ie,Object.assign({},e,{label:"From State",selectOptions:a}))},validate:re,isValid:!R(t,"from")}),ce(t,"from"),n.a.createElement(Z.a,{name:"to",component:function(e){return n.a.createElement(ie,Object.assign({},e,{label:"To State",selectOptions:a}))},validate:re,isValid:!R(t,"to")}),ce(t,"to"),n.a.createElement(Z.a,{name:"instruction.audio",component:function(e){return n.a.createElement(oe,Object.assign({},e,{type:"text",label:"Audio Instruction"}))}}),n.a.createElement(Z.a,{name:"instruction.image",component:function(e){return n.a.createElement(oe,Object.assign({},e,{type:"text",label:"Image Instruction"}))}}),n.a.createElement(Z.a,{name:"instruction.video",component:function(e){return n.a.createElement(oe,Object.assign({},e,{type:"text",label:"Video Instruction"}))}}))}(o,a)),t.callable.map(function(r,n){return pe(c,p,t,n,e,a)}),n.a.createElement(Y.a.Row,null,n.a.createElement(z.a,{variant:"light",className:"btn-block",onClick:function(){return e.push({})}},u)))}}))}})),n.a.createElement(Q.a.Footer,null,n.a.createElement(z.a,{variant:"secondary",onClick:i},"Close"),n.a.createElement(z.a,{variant:"primary",onClick:function(t){e.form.current.submitForm()}},"Save Changes")))}}]),t}(r.Component),ge=a(202),me=a.n(ge),he=a(445);var fe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).diagramRef=n.a.createRef(),a.alert=a.alert.bind(Object(d.a)(Object(d.a)(a))),a.onImport=a.onImport.bind(Object(d.a)(Object(d.a)(a))),a.onExport=a.onExport.bind(Object(d.a)(Object(d.a)(a))),a.onAdd=a.onAdd.bind(Object(d.a)(Object(d.a)(a))),a.onDelete=a.onDelete.bind(Object(d.a)(Object(d.a)(a))),a.onClickCell=a.onClickCell.bind(Object(d.a)(Object(d.a)(a))),a.onModalCancel=a.onModalCancel.bind(Object(d.a)(Object(d.a)(a))),a.onModalSave=a.onModalSave.bind(Object(d.a)(Object(d.a)(a))),a.state={fsm:new he.StateMachine,curFSMElement:null,alertMsg:{show:!0,type:"info",msg:"Welcome to State Machine Editor!"},showNewElementModal:!1,newElementModalType:null},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement(m.a,{fluid:!0},n.a.createElement("h1",null,"State Machine Visualizer with React"),""!==this.state.alertMsg.msg&&n.a.createElement(M.a,{dismissible:!0,variant:this.state.alertMsg.type},this.state.alertMsg.msg),n.a.createElement(f.a,null,n.a.createElement(y.a,{sm:6,style:{backgroundColor:"lavender"}},n.a.createElement("h4",null,"Diagram"),n.a.createElement(F,{fsm:this.state.fsm,onClickCell:this.onClickCell,ref:this.diagramRef})),n.a.createElement(y.a,{sm:6},n.a.createElement($,{onImport:this.onImport,onAdd:this.onAdd,onExport:this.onExport,onDelete:this.onDelete}),this.state.curFSMElement&&n.a.createElement(f.a,null,n.a.createElement(W,{element:this.state.curFSMElement,style:{width:"100%"}})))),n.a.createElement("footer",null,n.a.createElement(m.a,null,n.a.createElement("span",{className:"text-muted"},"Copyright Carnegie Mellon University"))),this.state.showNewElementModal&&n.a.createElement(de,{fsm:this.state.fsm,show:this.state.showNewElementModal,type:this.state.newElementModalType,onModalSave:this.onModalSave,onModalCancel:this.onModalCancel}))}},{key:"alert",value:function(e,t){this.setState({alertMsg:{type:e,msg:t}})}},{key:"onImport",value:function(e,t){var a=this;t.forEach(function(e){var t=e[0].target.result,r=null;try{r=function(e){var t=null;try{t=new he.StateMachine.deserializeBinary(e)}catch(a){throw a}return t}(t),a.setState({fsm:r,curFSMElement:null}),a.alert("info","Success! State machine imported.")}catch(n){a.alert("danger","Incorrect File Format. Failed to import the file. \n"+n)}})}},{key:"onExport",value:function(){var e=this.state.fsm;if(0===e.getStatesList().length)this.alert("danger","Empty state machine! There is nothing to save. \n");else{""==e.getStartState()&&e.setStartState(e.getStatesList()[0].getName());var t=e.serializeBinary(),a=new Blob([t],{type:"application/octet-stream"});me()(a,"app.pbfsm")}}},{key:"onAdd",value:function(e){this.setState({showNewElementModal:!0,newElementModalType:e})}},{key:"isElementSafeToDelete",value:function(e){var t=this.state.fsm,a=j(e),r=!0;switch(a){case k.STATE:return e.getTransitionsList().length>0&&(r=!1),t.getStatesList().map(function(t){t.getTransitionsList().map(function(t){t.getNextState()===e.getName()&&(r=!1)})}),r;case k.TRANSITION:return r;default:throw new Error("Unsupported Element Type: "+a)}}},{key:"deleteStatePb",value:function(e){var t=this.state.fsm;if(!this.isElementSafeToDelete(e))return this.alert("danger","A state cannot be deleted unless all transitions to/from it have been deleted.");var a=t.getStatesList().indexOf(e);t.getStatesList().splice(a,a+1),this.setState({fsm:t,curFSMElement:null})}},{key:"deleteTransitionPb",value:function(e){var t=this.state.fsm;if(!this.isElementSafeToDelete(e))return this.alert("danger","The transition cannot be safely deleted");t.getStatesList().map(function(t){var a=t.getTransitionsList().indexOf(e);a>=0&&t.getTransitionsList().splice(a,a+1)}),this.setState({fsm:t,curFSMElement:null})}},{key:"onDelete",value:function(){var e=this.state.curFSMElement;if(null===e)this.alert("danger","Cannot delete. There is no element selected.");else{var t=j(e);switch(t){case k.STATE:this.deleteStatePb(e);break;case k.TRANSITION:this.deleteTransitionPb(e);break;default:throw new Error("Unsupported Element Type: "+t)}}}},{key:"onClickCell",value:function(e){var t=this.diagramRef.current.cellId2FSMElement[e.model.id];this.setState({curFSMElement:t})}},{key:"addCallableFormDataToPb",value:function(e,t,a,r){for(var n=function(n){var o=e[n],i=new a;i.setName(o.name),i.setCallableName(o.type);var s={};Object.keys(r[o.type]).map(function(e){s[e]=o.args[e]}),i.setCallableArgs(JSON.stringify(s)),t(i)},o=0;o<e.length;o++)n(o)}},{key:"createStatePb",value:function(e){var t=new he.State;return t.setName(e.name),this.addCallableFormDataToPb(e.callable,t.addProcessors.bind(t),he.Processor,te),t}},{key:"findStatePb",value:function(e){var t=null;return this.state.fsm.getStatesList().map(function(a){a.getName()==e&&(t=a)}),t}},{key:"createTransitionPb",value:function(e){var t=new he.Transition;t.setName(e.name),t.setNextState(e.to);var a=new he.Instruction;return a.setAudio(e.instruction.audio),a.setImage(e.instruction.image),a.setVideo(e.instruction.video),t.setInstruction(a),this.addCallableFormDataToPb(e.callable,t.addPredicates.bind(t),he.TransitionPredicate,ae),t}},{key:"onModalSave",value:function(e,t){var a=this.state.fsm;switch(e){case k.STATE:var r=this.createStatePb(t);a.addStates(r);break;case k.TRANSITION:var n=this.createTransitionPb(t);this.findStatePb(t.from).addTransitions(n);break;default:throw new Error("Unsupported Element Type: "+e+". Failed to add a new element")}this.setState({fsm:a}),this.setState({showNewElementModal:!1})}},{key:"onModalCancel",value:function(){this.setState({showNewElementModal:!1})}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},78:function(e){e.exports={FasterRCNNOpenCVProcessor:{proto_path:"",model_path:"",labels:"None",conf_threshold:"0.8"},DummyProcessor:{dummy_input:"dummy_input_value"}}},79:function(e){e.exports={always:{},has_obj_cls:{cls_name:""}}}},[[207,2,1]]]);
//# sourceMappingURL=main.e53c745a.chunk.js.map